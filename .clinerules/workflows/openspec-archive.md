# OpenSpec: アーカイブ (Archive)

デプロイ済みの OpenSpec 変更をアーカイブし、仕様（specs）を更新します。

<!-- OPENSPEC:START -->

**ガードレール**

- まずはシンプルで最小限の実装を優先し、要求された場合や明らかに不可欠な場合にのみ複雑さを追加してください。
- 変更は、要求された成果の範囲内に厳密に留めてください。
- 追加の OpenSpec 規約や明確化が必要な場合は、`.openspec/` ディレクトリ内の `.openspec/AGENTS.md`（見当たらない場合は `ls openspec` または `openspec update` を実行）を参照してください。

**ステップ**

1. アーカイブする変更 ID を特定します。
   - プロンプトに具体的な変更 ID が含まれている場合（例：スラッシュコマンドの引数によって `<ChangeId>` ブロックに入力されている場合）は、空白を除去してその値を使用します。
   - 会話の中で変更が曖昧に言及されている場合（例：タイトルや概要のみ）、`openspec list` を実行して候補となる ID を表示し、ユーザーに確認します。
   - それ以外の場合は、会話を見直し、`openspec list` を実行した後、どの変更をアーカイブするかユーザーに尋ね、ID が確定するまで待ちます。
   - ID が特定できない場合は、アーカイブ作業を中断し、ユーザーにその旨を伝えてください。
2. `openspec list`（または `openspec show <id>`）を実行して ID を検証します。変更が見当たらない、すでにアーカイブされている、またはアーカイブの準備ができていない場合は中断します。
3. `openspec archive <id> --yes` を実行します。これにより、CLI はプロンプトを表示せずに変更を移動し、仕様を更新します（ツール作業のみの場合は `--skip-specs` を使用してください）。
4. コマンド出力を確認し、対象の仕様が更新され、変更が `changes/archive/` に移動したことを確認します。
5. `openspec validate --strict` で検証し、異常があれば `openspec show <id>` で詳細を確認します。

**リファレンス**

- アーカイブ前に `openspec list` で変更 ID を再確認してください。
- `openspec list --specs` で更新された仕様を確認し、検証エラーがあれば解決してから完了してください。
<!-- OPENSPEC:END -->
