# OpenSpec: 提案 (Proposal)

新しい OpenSpec 変更案を作成し、厳密に検証します。

`openspec:proposal`

<!-- OPENSPEC:START -->

**ガードレール**

- まずはシンプルで最小限の実装を優先し、要求された場合や明らかに不可欠な場合にのみ複雑さを追加してください。
- 変更は、要求された成果の範囲内に厳密に留めてください。
- 追加の OpenSpec 規約や明確化が必要な場合は、`.openspec/` ディレクトリ内の `.openspec/AGENTS.md`（見当たらない場合は `ls openspec` または `openspec update` を実行）を参照してください。
- 曖昧な点があれば特定し、ファイルを編集する前に必要な補足質問を行ってください。
- 提案段階ではコードを一切書かないでください。設計ドキュメント（proposal.md、tasks.md、design.md、spec delta）のみを作成してください。実装は承認後の適用ステージで行われます。

**ステップ**

1. `.openspec/project.md` を確認し、`openspec list` および `openspec list --specs` を実行し、関連するコードやドキュメントを（`rg`/`ls` などで）調査して、提案を現在の動作に基づいたものにします。明確化が必要なギャップがあれば記録してください。
2. 動詞で始まるユニークな `change-id` を選択し、`.openspec/changes/<id>/` フォルダ内に `proposal.md`、`tasks.md`、および（必要な場合は）`design.md` を作成します。
3. 変更内容を具体的な「機能（capabilities）」や「要件（requirements）」に落とし込み、複数のスコープにまたがる取り組みは、明確な関係性と順序性を持つ個別の spec delta に分割してください。
4. 解決策が複数のシステムにまたがる場合、新しいパターンを導入する場合、または仕様を決定する前にトレードオフの議論が必要な場合は、`design.md` にアーキテクチャ上の判断理由を記述してください。
5. `changes/<id>/specs/<capability>/spec.md`（機能ごとに 1 つのフォルダ）に spec delta をドラフトします。`## ADDED|MODIFIED|REMOVED Requirements` を使用し、要件ごとに少なくとも 1 つの `#### Scenario:` を含め、関連する機能がある場合はクロスリファレンスを設定してください。
   - **テスト強化**: 各シナリオに対して、それを検証するための具体的なテスト方針（ユニットテスト、E2E テスト、結合テストのいずれか）と、期待されるアサーションを明記してください。
6. `tasks.md` を、ユーザーが進捗を確認できる検証可能（テスト、ツールによる確認を含む）で小さな作業項目の順序付きリストとして作成します。依存関係や並列作業が可能な箇所を明確にしてください。
   - **テスト強化**: 各タスクには、そのタスクの完了を定義する具体的なテストコードの作成またはテストの実行を含めてください。
7. `openspec validate <id> --strict` で検証し、すべての問題を解決してから提案を共有してください。

**リファレンス**

- 検証に失敗した場合は、`openspec show <id> --json --deltas-only` または `openspec show <spec> --type spec` を使用して詳細を確認してください。
- 新しい要件を書く前に、`rg -n "Requirement:|Scenario:" .openspec/specs` で既存の要件を検索してください。
- 提案を現在の実装状況に合わせるために、`rg <keyword>`、`ls`、または直接ファイルを読み込んでコードベースを調査してください。
<!-- OPENSPEC:END -->
